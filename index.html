<!DOCTYPE html>

<html>

<head>
	<title>Canvas</title>
	<style type="text/css">
		.content{
			width: 100%;
			min-height: 100%;
			background-color: white;
			margin: auto;
		}
		canvas{
			background-color: white;
			margin: auto;
		}
	</style>

</head>

<body>
	<div class="content">
		<canvas id="canvas" width="800" height="600">	</canvas>
		<img id="imagen" style="visibility: hidden;" src="imagen.jpg">
	</div>

	<!--<script type="text/javascript">
	
		var canvas = document.getElementById('canvas');
		var isPressed = false;

		if (canvas.getContext){
			var ctx = canvas.getContext('2d'); 

        	//ctx.fillStyle = "rgb(100,0,0)";
        	//ctx.fillRect (10, 10, 55, 50);

        	//ctx.fillStyle = "rgba(0, 0, 100, 0.5)";
        	//ctx.fillRect (30, 30, 55, 50);

        	//ctx.moveTo(0, 0);
        	//ctx.lineTo(100, 100);
        	//ctx.stroke();

        	//ctx.beginPath();
			//ctx.arc(150, 150, 40, 0, 2 * Math.PI);
			//ctx.stroke();
			//ctx.closePath();


			//ctx.font = "25px Arial";
			//ctx.fillText("Hello World", 10, 30);

			//ctx.font = "25px Arial";
			//ctx.strokeStyle = "black"
			//ctx.strokeText("Hello World", 10, 30);

			//var grd = ctx.createLinearGradient(0, 0, 200, 0);
			//grd.addColorStop(0,"red");
			//grd.addColorStop(1,"white");

			//ctx.fillStyle = grd;
			//ctx.fillRect(10,10,150,80);
			
			//var grd = ctx.createRadialGradient(75, 75, 1, 120, 90, 100)
			//grd.addColorStop(0,"red");
			//grd.addColorStop(1,"white"); 
			
			//ctx.fillStyle = grd;
			//ctx.fillRect(10,10,150,150);

			///window.onload=function() {
				///var img = document.getElementById('imagen');
				///ctx.drawImage(img,10,10);
			///}
			
        	/*ctx.beginPath();
   			ctx.arc(75,75,50,0,Math.PI*2,true);
   			ctx.fillStyle= "rgb(216, 183, 157)";
   			ctx.fill();
            
            ctx.beginPath();
   			ctx.arc(75,75,50,5,Math.PI*2);
   			ctx.fillStyle= "rgb(223, 210, 81)";
   			ctx.fill();
    		
    		ctx.beginPath();
    		ctx.arc(75,75,35,0,Math.PI,false);  
    		ctx.fillStyle= "rgb(255, 255, 255)";
    		ctx.fill()   
    		
    		ctx.beginPath();
    		ctx.arc(60,65,5,0,Math.PI*2,true);
    		ctx.fillStyle= "rgb(9, 47, 93)";
    		ctx.fill()  
  
    		ctx.beginPath();
    		ctx.arc(90,65,5,0,Math.PI*2,true);
    		ctx.fillStyle= "rgb(9, 47, 93)";
    		ctx.fill();
            
            ctx.fillStyle = "rgb(216, 183, 157)";
        	ctx.fillRect (55, 110, 40, 30);
           
            ctx.fillStyle = "rgb(0,0,0)";
        	ctx.fillRect (25, 140, 105, 200);
   
           	ctx.fillStyle = "rgb(0,0,0)";
        	ctx.fillRect (5, 140, 20, 60);
            
            ctx.fillStyle = "rgb(0,0,0)";
        	ctx.fillRect (130, 140, 20, 60);
            
            ctx.fillStyle = "rgb(216, 183, 157)";
        	ctx.fillRect (5, 200, 20, 80);
            
		    ctx.fillStyle = "rgb(216, 183, 157)";
        	ctx.fillRect (130, 200, 20, 80);
            
            ctx.beginPath();
    		ctx.arc(15,280, 15, 0,Math.PI*2,true);	
    		ctx.fillStyle= "rgb(216, 183, 157)";
    		ctx.fill();
            
            ctx.fillStyle = "rgb(159, 88, 59)";
        	ctx.fillRect (5, 260, 20, 10);
            
            ctx.beginPath();
    		ctx.arc(140,280, 15, 0,Math.PI*2,true);	
    		ctx.fillStyle= "rgb(216, 183, 157)";
    		ctx.fill();
            
            ctx.fillStyle = "rgb(60, 102, 175)";
        	ctx.fillRect (25, 340, 45, 80);
            
            ctx.fillStyle = "rgb(60, 102, 175)";
        	ctx.fillRect (85, 340, 45, 80);
         
            ctx.fillStyle = "rgb(142, 39, 69)";
        	ctx.fillRect (15, 420, 45, 20);
            
            ctx.fillStyle = "rgb(142, 39, 69)";
        	ctx.fillRect (95, 420, 45, 20);
        	
        	ctx.font = "25px Arial";
			ctx.strokeStyle = "black";
			ctx.strokeText("Victor Moreno", 150, 430);*/

			/*canvas.addEventListener("mousemove", function(evt){
				if(isPressed){
					ctx.fillStyle = 'rgb(0, 0, 0)';
					ctx.beginPath();
					ctx.arc(evt.layerX, evt.layerY, 5, 0, 2* Math.PI);
					ctx.fill();
				}
			});

			canvas.addEventListener("mouseup", function(evt){
				isPressed=false;
			});

			canvas.addEventListener("mousedown", function(evt){
				isPressed=true;
			});*/

			/*ctx.fillStyle = "rgb(159, 88, 59)";
        	ctx.fillRect (70, 120, 20, 120);

        	ctx.beginPath();
			ctx.arc(65, 105, 20, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(44, 182, 50)";
			ctx.fill();
			

			ctx.beginPath();
			ctx.arc(90, 105, 20, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(44, 182, 50)";
			ctx.fill();
			

			ctx.beginPath();
			ctx.arc(78, 75, 40, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(44, 182, 50)";
			ctx.fill();
			

			ctx.beginPath();
			ctx.arc(105, 85, 20, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(44, 182, 50)";
			ctx.fill();
			

			ctx.beginPath();
			ctx.arc(105, 65, 20, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(44, 182, 50)";
			ctx.fill();
			
			ctx.beginPath();
			ctx.arc(78, 45, 20, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(44, 182, 50)";
			ctx.fill();
			

			ctx.beginPath();
			ctx.arc(55, 65, 20, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(44, 182, 50)";
			ctx.fill();
			

			ctx.beginPath();
			ctx.arc(55, 85, 20, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(44, 182, 50)";
			ctx.fill();
			

			ctx.beginPath();
			ctx.arc(75, 85, 5, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(179, 7, 7)";
			ctx.fill();
        	

			ctx.beginPath();
			ctx.arc(55, 75, 5, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(179, 7, 7)";
			ctx.fill();

			ctx.beginPath();
			ctx.arc(105, 75, 5, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(179, 7, 7)";
			ctx.fill();
			

			ctx.fillStyle = "rgb(222, 222, 222)";
        	ctx.fillRect (200, 120, 200, 120);

        	ctx.fillStyle = "rgb(0, 0, 0)";
        	ctx.fillRect (275, 170, 50, 70);
        	
        	ctx.beginPath();
			ctx.arc(315, 210, 5, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(255, 255, 255)";
			ctx.fill();

			ctx.fillStyle = "rgb(185, 174, 174)";
        	ctx.fillRect (225, 140, 20, 20);

        	ctx.fillStyle = "rgb(185, 174, 174)";
        	ctx.fillRect (350, 140, 20, 20);

        	ctx.beginPath();
			ctx.arc(480, 40, 40, 0, 2 * Math.PI);
			ctx.fillStyle = "rgb(232, 234, 89)";
			ctx.fill();

			ctx.fillStyle = "rgb(222, 222, 222)";
        	ctx.strokeRect (180, 100, 240, 20);

        	ctx.fillStyle = "rgb(222, 222, 222)";
        	ctx.strokeRect (200, 80, 200, 20);

        	ctx.fillStyle = "rgb(222, 222, 222)";
        	ctx.strokeRect (220, 60, 160, 20);

        	ctx.fillStyle = "rgb(222, 222, 222)";
        	ctx.strokeRect (240, 40, 120, 20);
        */



        }



	</script>-->

	<script type="text/javascript">
        var canvas = null, ctx = null;
        var x = 0, y = 0, direc = null, vel = 5;
        var player = null, food = null, score = 0, walls = new Array();
        var gameO= false, pause= null;	

        window.requestAnimationFrame = (function(){
        	return window.requestAnimationFrame ||
        	window.mozRequestAnimationFrame ||
        	window.webkitRequestAnimationFrame ||
        	 function (callback) {
            	window.setTimeout(callback, 17);
       		 }
        }());

        function paint(ctx)
        {	
        	ctx.fillStyle = "black";
			ctx.fillRect(0,0,canvas.width,canvas.height)

			ctx.fillStyle = "#0f0";
			player.paint(ctx);

			ctx.fillStyle = "red";
			food.paint(ctx);

			ctx.fillStyle = "white";
			ctx.textAlign = "left";
			ctx.fillText("SCORE: "+score+ " SPEED: "+vel, 10, 10);

			ctx.fillStyle = "#9E9A99";
			for (var i = walls.length - 1; i >= 0; i--) {
				walls[i].paint(ctx);
			}

			if(pause && !gameO){
				ctx.fillStyle = "white";
				ctx.textAlign = "center"; 
				ctx.fillText(" P A U S E ",240,120);
			} 
			if(gameO){
				ctx.fillStyle = "white";
				ctx.textAlign = "center";
				ctx.fillText(" G A M E O V E R ",230,120);
			} 
        }

        function act(){   	

        	if(!pause){ 
	        	
	        	if(direc=="right"){
	        		player.x+=vel;
	        	}

	        	if(direc=="left"){
	        		player.x-=vel;
	        	}

	        	if(direc=="up"){
	        		player.y-=vel;
	        	}

	        	if(direc=="down"){
	        		player.y+=vel;
	        	}

	        	if(player.x < 0){
	        		player.x = canvas.width;      		
	        	}

	        	if(player.x > canvas.width){
	        		player.x=0;
	        	}

	        	if(player.y < 0){
	        		player.y = canvas.height;      		
	        	}

	        	if(player.y > canvas.height){
	        		player.y=0;
	        	}

	        	if(player.intersects(food)){
					food.x = random(canvas.width);
					food.y = random(canvas.height);
					score++;
					//player.w+=10;
				}

				for (var i = walls.length - 1; i >= 0; i--) {
					if(walls[i].intersects(player)){
						gameO = true;
						lastPress = null; 
					}
				}
			}
        }

        function run(){
        	window.requestAnimationFrame(run);
        	act();
        	paint(ctx);
        }

        function init(){
            canvas = document.getElementById('canvas');
            ctx = canvas.getContext('2d');

            player = new Rectangle(0,0,10,10);

			food = new Rectangle(70,50,10,10);

			walls.push(new Rectangle(100,50,10,10));
			walls.push(new Rectangle(100,200,10,10));

			walls.push(new Rectangle(400,50,10,10));
			walls.push(new Rectangle(400,200,10,10));

            run();
        } 

		window.addEventListener('load',init,false);

        document.addEventListener('keydown', function(e){
        	if(e.keyCode == 65){
        		direc="left";
        	}

        	if(e.keyCode == 68){
        		direc="right";
        	}

        	if(e.keyCode == 87){
        		direc="up";
        	}

        	if(e.keyCode == 83){
        		direc="down";
        	}

        	if(e.keyCode==32){

				pause = (pause)?false:true; 
			}

        });


        function Rectangle(x,y,w,h){
			this.x = x;
			this.y = y;
			this.w = w;
			this.h = h;

			this.paint = function(ctx){
				ctx.fillRect(this.x,this.y,this.w,this.h);
			}

			this.intersects = function(rect){
				if (this.x < rect.x + rect.w && this.x + this.w > rect.x && 
					this.y < rect.y + rect.h && this.y + this.h > rect.y){
					return true;
				}
			}
		}

		function random(m){
			return Math.floor(Math.random()*m);
		}

    </script>

</body>	
</html>
